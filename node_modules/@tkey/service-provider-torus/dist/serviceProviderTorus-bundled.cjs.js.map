{"version":3,"file":"serviceProviderTorus-bundled.cjs.js","mappings":"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","sources":["webpack://@tkey/service-provider-torus/webpack/bootstrap","webpack://@tkey/service-provider-torus/webpack/runtime/compat get default export","webpack://@tkey/service-provider-torus/webpack/runtime/define property getters","webpack://@tkey/service-provider-torus/webpack/runtime/hasOwnProperty shorthand","webpack://@tkey/service-provider-torus/webpack/runtime/make namespace object","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/asyncToGenerator\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/classCallCheck\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/createClass\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/assertThisInitialized\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/get\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/inherits\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/getPrototypeOf\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@babel/runtime/regenerator\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@tkey/service-provider-base\"","webpack://@tkey/service-provider-torus/external commonjs2 \"@toruslabs/customauth\"","webpack://@tkey/service-provider-torus/external commonjs2 \"bn.js\"","webpack://@tkey/service-provider-torus/./src/TorusServiceProvider.ts","webpack://@tkey/service-provider-torus/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/asyncToGenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/classCallCheck\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/createClass\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/assertThisInitialized\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/get\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/inherits\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/getPrototypeOf\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/regenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/service-provider-base\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/customauth\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"bn.js\");","import { StringifiedType, TorusServiceProviderArgs } from \"@tkey/common-types\";\nimport { ServiceProviderBase } from \"@tkey/service-provider-base\";\nimport CustomAuth, {\n  AggregateLoginParams,\n  CustomAuthArgs,\n  HybridAggregateLoginParams,\n  InitParams,\n  SubVerifierDetails,\n  TorusAggregateLoginResponse,\n  TorusHybridAggregateLoginResponse,\n  TorusLoginResponse,\n} from \"@toruslabs/customauth\";\nimport BN from \"bn.js\";\n\nclass TorusServiceProvider extends ServiceProviderBase {\n  directWeb: CustomAuth;\n\n  singleLoginKey: BN;\n\n  customAuthArgs: CustomAuthArgs;\n\n  constructor({ enableLogging = false, postboxKey, customAuthArgs }: TorusServiceProviderArgs) {\n    super({ enableLogging, postboxKey });\n    this.customAuthArgs = customAuthArgs;\n    this.directWeb = new CustomAuth(customAuthArgs);\n    this.serviceProviderName = \"TorusServiceProvider\";\n  }\n\n  static fromJSON(value: StringifiedType): TorusServiceProvider {\n    const { enableLogging, postboxKey, customAuthArgs, serviceProviderName } = value;\n    if (serviceProviderName !== \"TorusServiceProvider\") return undefined;\n\n    return new TorusServiceProvider({\n      enableLogging,\n      postboxKey,\n      customAuthArgs,\n    });\n  }\n\n  async init(params: InitParams): Promise<void> {\n    return this.directWeb.init(params);\n  }\n\n  async triggerLogin(params: SubVerifierDetails): Promise<TorusLoginResponse> {\n    const obj = await this.directWeb.triggerLogin(params);\n    this.postboxKey = new BN(obj.privateKey, \"hex\");\n    return obj;\n  }\n\n  async triggerAggregateLogin(params: AggregateLoginParams): Promise<TorusAggregateLoginResponse> {\n    const obj = await this.directWeb.triggerAggregateLogin(params);\n    this.postboxKey = new BN(obj.privateKey, \"hex\");\n    return obj;\n  }\n\n  async triggerHybridAggregateLogin(params: HybridAggregateLoginParams): Promise<TorusHybridAggregateLoginResponse> {\n    const obj = await this.directWeb.triggerHybridAggregateLogin(params);\n    const aggregateLoginKey = obj.aggregateLogins[0].privateKey;\n    this.postboxKey = new BN(aggregateLoginKey, \"hex\");\n    this.singleLoginKey = new BN(obj.singleLogin.privateKey, \"hex\");\n    return obj;\n  }\n\n  toJSON(): StringifiedType {\n    return {\n      ...super.toJSON(),\n      serviceProviderName: this.serviceProviderName,\n      customAuthArgs: this.customAuthArgs,\n    };\n  }\n}\n\nexport default TorusServiceProvider;\n","export { default, default as TorusServiceProvider } from \"./TorusServiceProvider\";\n"],"names":["ServiceProviderBase","CustomAuth","BN","TorusServiceProvider","enableLogging","postboxKey","customAuthArgs","directWeb","serviceProviderName","params","init","triggerLogin","obj","privateKey","triggerAggregateLogin","triggerHybridAggregateLogin","aggregateLoginKey","aggregateLogins","singleLoginKey","singleLogin","value","undefined","default"],"sourceRoot":""}